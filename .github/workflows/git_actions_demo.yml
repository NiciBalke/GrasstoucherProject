name: GitHub Actions Demo
run-name: ${{ github.actor }} is testing out GitHub Actions ðŸš€
on: 
  pull_request:

jobs:

  c-Tests:
    runs-on: ubuntu-latest
    steps:
     - uses: actions/checkout@v3

     - name: install CUnit
       run: sudo apt-get update && sudo apt-get install -y libcunit1-dev make gcc

     - name: build & run tests
       run: make run_tests


  c-Lint:
    runs-on: ubuntu-latest
    steps:
        - uses: actions/checkout@v3

        - name: Install clang-tidy
          run: sudo apt-get update && sudo apt-get install -y clang-tidy libcunit1-dev gcc make

        - name: Generate compile_commands.json
          run: |
            sudo apt-get install -y bear
            bear -- make

        - name: Run clang-tidy on all C files
          run: clang-tidy -p . $(find . -name "*.c")


  web-Lint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Set up Node.js

        uses: actions/setup-node@v3
        with:
          node-version: 20

      - name: Install linters

        run: npm install --save-dev eslint stylelint eslint-formatter-github

      - name: Run ESLint (JS)
        run: npx eslint "**/*.js" --format stylish #|| true


      - name: Run Stylelint (CSS)
        run: stylelint "**/*.css" #|| true

      - run: echo "linting done"


  summary-job:
    runs-on: ubuntu-latest

    # collect logs from the other jobs and aggregate them here
    steps:
      - run: echo "coming soon"
        

